# しりとりWebアプリケーション 要件定義書

## アプリケーション概要

日本語の50音を使った「しりとりカードゲーム」のWebアプリケーション。プレイヤーはフィールドの文字で始まる単語を考え、手札の文字で終わらせることで手札を減らしていくタイムアタック形式のゲーム。

## 技術スタック

- **フレームワーク**: Next.js（サーバーサイド機能を含む）
- **デプロイ**: Vercel
- **UIコンポーネント**: shadcn/ui
- **スタイリング**: Tailwind CSS（shadcnに含まれる）

## ゲームルール

### 基本ルール
1. 50音表のカードを1音ずつ2枚用意（「を」「ん」は除外）
2. ゲーム開始時に手札5枚を山札から引く
3. 山札からフィールドに1枚めくって配置
4. プレイヤーはフィールドの文字で始まり、手札の文字で終わる単語を考える
5. 単語を口に出した後、対応する手札のカードをタップ
6. タップしたカードがフィールドに移動
7. 手札を全てなくすまでの時間を計測

### カード構成
- **対象文字**: あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわ（濁音・半濁音は除く）
- **除外文字**: を、ん
- **総枚数**: 各文字2枚ずつ

## 機能要件

### Phase 1: 基本ゲーム機能
1. **ゲーム画面**
   - フィールドエリア（現在の文字表示）
   - 手札エリア（5枚のカード表示）
   - タイマー表示
   - ゲーム開始/リセットボタン

2. **ゲームフロー**
   - ゲーム開始処理
   - カード配布処理
   - 手札カードのタップ処理
   - フィールド更新処理
   - ゲーム終了判定
   - タイム記録

3. **UI/UX**
   - レスポンシブデザイン（モバイル対応）
   - カードのアニメーション効果
   - 直感的な操作性

### Phase 2: 今後の拡張予定
- タイムアタック以外のゲームモード
- 学習モード（文字数別単語閲覧機能）
- スコアランキング機能
- 難易度設定
- マルチプレイヤー機能

## 学習モード機能要件

### 概要
しりとりゲームで使用する単語の学習を支援するため、文字数ごとに単語を閲覧できる機能を提供する。

### 機能仕様

#### 1. モード選択
- メイン画面にゲームモード選択を追加
  - 「ゲームモード」（既存）
  - 「学習モード」（新規）

#### 2. 学習モード画面構成
- **ヘッダー**: タイトル「学習モード」
- **文字数選択エリア**: 2文字〜10文字の選択ボタン
- **ひらがな選択エリア**: あ行〜わ行の文字選択（50音）
- **単語表示エリア**: 選択条件に合致する単語リスト
- **戻るボタン**: メイン画面に戻る

#### 3. 機能詳細

##### 3.1 文字数フィルター
- ボタン形式で4〜8文字を選択(8文字のみ8文字以上とする)
- デフォルト: 全ての文字数を表示
- 複数選択可能（チェックボックス形式）

##### 3.2 ひらがなフィルター
- 50音表の形式で表示（5行×10列）
- 選択した文字で「始まる」単語を表示
- デフォルト: 全てのひらがなを表示
- 単一選択（ラジオボタン形式）

##### 3.3 単語リスト表示
- 条件に合致する単語を一覧表示
- 表示項目:
  - 単語（ひらがな）
  - 文字数
  - 最後の文字（しりとり用）
- ページネーション（50件/ページ）
- 検索ボックス（部分一致検索）

#### 4. データソース
- 初期データ: 基本的な日本語単語辞書
- カテゴリ:
  - 名詞（動物、食べ物、色、など）
  - 形容詞
  - 動詞（連用形）
- 除外: 「ん」で終わる単語

#### 5. UI設計

##### 5.1 レスポンシブ対応
- デスクトップ: 3カラムレイアウト（フィルター | 単語リスト）
- モバイル: 1カラムレイアウト（縦積み）

##### 5.2 デザイン方針
- 既存のゲーム画面と統一感のあるデザイン
- Tailwind CSS + shadcn/ui コンポーネントを使用
- カードベースのレイアウト

#### 6. 技術実装

##### 6.1 データ構造
```typescript
interface Word {
  text: string;           // 単語（ひらがな）
  length: number;         // 文字数
  firstChar: string;      // 最初の文字
  lastChar: string;       // 最後の文字
  category?: string;      // カテゴリ（動物、食べ物など）
}

interface StudyModeState {
  selectedLengths: number[];      // 選択された文字数
  selectedStartChar: string | null; // 選択された開始文字
  searchQuery: string;            // 検索クエリ
  currentPage: number;            // 現在のページ
}
```

##### 6.2 ファイル構成
- `src/components/StudyMode/StudyModeMain.tsx` - メインコンポーネント
- `src/components/StudyMode/LengthFilter.tsx` - 文字数フィルター
- `src/components/StudyMode/HiraganaFilter.tsx` - ひらがなフィルター
- `src/components/StudyMode/WordList.tsx` - 単語リスト
- `src/hooks/useStudyMode.ts` - 学習モード用フック
- `src/data/words.ts` - 単語データ

##### 6.3 ルーティング
- `/study` - 学習モードページ
- メイン画面からのナビゲーション追加

#### 7. 今後の拡張予定
- お気に入り単語機能
- カスタム単語追加機能
- 単語クイズ機能

## 非機能要件

### パフォーマンス
- 初回読み込み時間: 3秒以内
- カードタップ時の反応速度: 100ms以内

### 対応環境
- **デスクトップ**: Chrome, Firefox, Safari, Edge（最新版）
- **モバイル**: iOS Safari, Android Chrome（最新版）

### アクセシビリティ
- キーボード操作対応
- スクリーンリーダー対応
- カラーコントラスト遵守

## データ設計

### ゲーム状態
```typescript
interface GameState {
  deck: string[];           // 山札
  hand: string[];          // 手札
  field: string;           // フィールドの文字
  startTime: number;       // ゲーム開始時間
  isGameActive: boolean;   // ゲーム進行中フラグ}
```

### カード情報
```typescript
interface Card {
  character: string;       // ひらがな1文字
  id: string;             // ユニークID
}
```

## UI設計

### レイアウト構成
- **ヘッダー**: タイトル、タイマー
- **メインエリア**: フィールドカード（中央）
- **手札エリア**: 5枚のカード（下部）
- **コントロールエリア**: スタート/リセットボタン

### カードデザイン
- サイズ: 80px × 120px（モバイル時は縮小）
- 角丸: 8px
- シャドウ: 軽いドロップシャドウ
- 文字: 大きめのフォントサイズ（24px以上）

## 開発フェーズ

### Phase 1: MVP開発
1. 基本ゲーム機能実装
2. UI/UXの基本実装
3. Vercelデプロイ設定

### Phase 2: 機能拡張
1. 追加ゲームモード
2. データ永続化
3. ランキング機能

## 品質管理

### テスト要件
- ユニットテスト: ゲームロジック
- 統合テスト: UI操作フロー
- E2Eテスト: 完全なゲームプレイ

### パフォーマンス監視
- Web Vitals測定
- エラー監視
- ユーザー行動分析