# しりとりWebアプリケーション 要件定義書

## アプリケーション概要

日本語の50音を使った「しりとりカードゲーム」のWebアプリケーション。プレイヤーはフィールドの文字で始まる単語を考え、手札の文字で終わらせることで手札を減らしていくタイムアタック形式のゲーム。

## 技術スタック

- **フレームワーク**: Next.js（サーバーサイド機能を含む）
- **デプロイ**: Vercel
- **UIコンポーネント**: shadcn/ui
- **スタイリング**: Tailwind CSS（shadcnに含まれる）

## ゲームルール

### 基本ルール
1. 50音表のカードを1音ずつ2枚用意（「を」「ん」は除外）
2. ゲーム開始時に手札5枚を山札から引く
3. 山札からフィールドに1枚めくって配置
4. プレイヤーはフィールドの文字で始まり、手札の文字で終わる単語を考える
5. 単語を口に出した後、対応する手札のカードをタップ
6. タップしたカードがフィールドに移動
7. 手札を全てなくすまでの時間を計測

### 手札リシャッフル機能（オプション）
- ゲーム中にプレイヤーは「手札リシャッフル」を実行できる
- 現在の手札を全て山札に戻し、手札枚数+1枚の新しい手札を引く
- 例: 手札3枚の時にリシャッフルすると、4枚の新しい手札を獲得
- リシャッフル実行回数は制限なし（戦略的な使用を促すため）
- ゲーム開始前にオン/オフを選択可能

### 数字カード機能（オプション）
- 山札に数字カード「5」「6」「7」を各2枚追加
- 数字カードの効果: フィールドの頭文字で始まる、指定された文字数の単語を作る
- 例: フィールドが「あ」で手札に「5」がある場合 → 5文字の単語「あり がとう」
- 数字カードをタップ後、山札から数字以外のカードが出るまでめくってフィールドに配置
- ゲーム開始前にオン/オフを選択可能

### カード構成
- **対象文字**: あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわ（濁音・半濁音は除く）
- **除外文字**: を、ん
- **基本枚数**: 各文字2枚ずつ
- **数字カード（オプション）**: 5, 6, 7 を各2枚ずつ追加

## 機能要件

### Phase 1: 基本ゲーム機能
1. **ゲーム画面**
   - ゲーム設定画面（オプション選択）
   - フィールドエリア（現在の文字表示）
   - 手札エリア（可変枚数のカード表示）
   - タイマー表示
   - ゲーム開始/リセットボタン
   - 手札リシャッフルボタン（オプション有効時のみ）

2. **ゲームフロー**
   - ゲーム設定選択
   - ゲーム開始処理
   - カード配布処理（オプションに応じた山札構成）
   - 手札カードのタップ処理
   - フィールド更新処理（数字カード対応）
   - 手札リシャッフル処理（オプション有効時のみ）
   - ゲーム終了判定
   - タイム記録

3. **UI/UX**
   - レスポンシブデザイン（モバイル対応）
   - カードのアニメーション効果
   - 直感的な操作性

### Phase 2: 今後の拡張予定
- タイムアタック以外のゲームモード
- スコアランキング機能
- 難易度設定
- マルチプレイヤー機能

## 非機能要件

### パフォーマンス
- 初回読み込み時間: 3秒以内
- カードタップ時の反応速度: 100ms以内

### 対応環境
- **デスクトップ**: Chrome, Firefox, Safari, Edge（最新版）
- **モバイル**: iOS Safari, Android Chrome（最新版）

### アクセシビリティ
- キーボード操作対応
- スクリーンリーダー対応
- カラーコントラスト遵守

## データ設計

### ゲーム状態
```typescript
interface GameState {
  deck: string[];           // 山札
  hand: string[];          // 手札
  field: string;           // フィールドの文字
  startTime: number;       // ゲーム開始時間
  isGameActive: boolean;   // ゲーム進行中フラグ}
```

### カード情報
```typescript
interface Card {
  character: string;       // ひらがな1文字
  id: string;             // ユニークID
}
```

## UI設計

### レイアウト構成
- **ヘッダー**: タイトル、タイマー
- **メインエリア**: フィールドカード（中央）
- **手札エリア**: 可変枚数のカード（下部）
- **コントロールエリア**: スタート/リセット/リシャッフルボタン

### カードデザイン
- サイズ: 80px × 120px（モバイル時は縮小）
- 角丸: 8px
- シャドウ: 軽いドロップシャドウ
- 文字: 大きめのフォントサイズ（24px以上）

## 開発フェーズ

### Phase 1: MVP開発
1. 基本ゲーム機能実装
2. UI/UXの基本実装
3. Vercelデプロイ設定

### Phase 2: 機能拡張
1. 追加ゲームモード
2. データ永続化
3. ランキング機能

## 品質管理

### テスト要件
- ユニットテスト: ゲームロジック
- 統合テスト: UI操作フロー
- E2Eテスト: 完全なゲームプレイ

### パフォーマンス監視
- Web Vitals測定
- エラー監視
- ユーザー行動分析